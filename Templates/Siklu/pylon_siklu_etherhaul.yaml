zabbix_export:
  version: '7.0'
  template_groups:
    - uuid: bf8846d58f414cd488b718c930236658
      name: 'Templates/Pylon Templates'
  templates:
    - uuid: 7495886f244b4eeca89dd1669b593649
      template: 'Pylon Siklu EtherHaul'
      name: 'Pylon Siklu EtherHaul'
      templates:
        - name: 'ICMP Ping'
        - name: 'Interfaces SNMP'
      groups:
        - name: 'Templates/Pylon Templates'
      items:
        - uuid: 354339bfb04c49a6833099137a7221b1
          name: 'Siklu Configuration Saved'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.31926.1.3.0
          key: siklu.configsaved
          history: 90d
          description: 'If the configuration of the radio is saved or not'
          tags:
            - tag: component
              value: system
          triggers:
            - uuid: b76dcc41388a48e08cde443a432ab7cd
              expression: 'last(/Pylon Siklu EtherHaul/siklu.configsaved)<>0'
              name: 'Configuration not Saved'
              priority: AVERAGE
              description: 'The configuration of the Siklu radio is not saved and will not be persisted if the radio looses power or is reloaded'
              dependencies:
                - name: 'No SNMP data collection'
                  expression: 'max(/Pylon Siklu EtherHaul/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
              tags:
                - tag: scope
                  value: configuration
        - uuid: 8569c807f7e1441e98baee24eb1b712f
          name: 'Siklu Radio CINR'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.31926.2.1.1.18.1
          key: siklu.rfAverageCinr
          delay: 30s
          history: 90d
          units: dB
          tags:
            - tag: component
              value: radio
          triggers:
            - uuid: 2aed44252c504402af000272f63e4d11
              expression: 'last(/Pylon Siklu EtherHaul/siklu.rfAverageCinr)<{$SIKLU.CINR_LOW}'
              name: 'RF Low CINR'
              opdata: 'CINR: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'The CINR value reported by the Radio is below the configured warning threshold of {$SIKLU.CINR_LOW}'
              dependencies:
                - name: 'No SNMP data collection'
                  expression: 'max(/Pylon Siklu EtherHaul/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: radio
        - uuid: 8b20824233bf44128b7cff73b8ffb198
          name: 'Siklu Radio RSSI'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.31926.2.1.1.19.1
          key: siklu.rfAverageRssi
          delay: 30s
          history: 90d
          value_type: FLOAT
          units: dBm
          tags:
            - tag: component
              value: radio
          triggers:
            - uuid: 6f82ac56cc414543b8399b7e01641263
              expression: 'last(/Pylon Siklu EtherHaul/siklu.rfAverageRssi)>{$SIKLU.RSSI_HIGH}'
              name: 'RF High RSSI'
              opdata: 'RSSI: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'The RSSI value reported by the Radio is above the configured warning threshold of {$SIKLU.RSSI_HIGH}'
              dependencies:
                - name: 'No SNMP data collection'
                  expression: 'max(/Pylon Siklu EtherHaul/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: radio
            - uuid: 3ba79d00fbee4b139a39cf9377998c85
              expression: 'last(/Pylon Siklu EtherHaul/siklu.rfAverageRssi)<{$SIKLU.RSSI_LOW}'
              name: 'RF Low RSSI'
              opdata: 'RSSI: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'The RSSI value reported by the Radio is below the configured warning threshold of {$SIKLU.RSSI_LOW}'
              dependencies:
                - name: 'No SNMP data collection'
                  expression: 'max(/Pylon Siklu EtherHaul/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: radio
            - uuid: 31efae184fe5420192b9c7010dbe1fb8
              expression: 'abs(avg(/Pylon Siklu EtherHaul/siklu.rfAverageRssi,5m:now-5m)-avg(/Pylon Siklu EtherHaul/siklu.rfAverageRssi,5m))>{$SIKLU.RSSI_DIFF_WARN}'
              name: 'RF RSSI Decreased Warning'
              opdata: 'RSSI: {ITEM.LASTVALUE1}'
              priority: AVERAGE
              description: 'The RSSI value over the last 5 minutes has decreased by {$SIKLU.RSSI_DIFF_WARN} dBm from the average of the previous 5 minutes. This may be indicative of a large decrease in radio signal'
              dependencies:
                - name: 'No SNMP data collection'
                  expression: 'max(/Pylon Siklu EtherHaul/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: radio
        - uuid: 7ac343ec10414aa3a0fb04800ef01190
          name: 'Siklu RF In Errored Octets'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.31926.2.2.1.4.1
          key: siklu.rfInErroredOctets
          delay: 30s
          history: 90d
          units: bps
          preprocessing:
            - type: CHANGE_PER_SECOND
              parameters:
                - ''
            - type: MULTIPLIER
              parameters:
                - '8'
          tags:
            - tag: component
              value: radio
        - uuid: bc00903a9e474fcb9063a6aedff415d8
          name: 'Siklu RF In Octets'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.31926.2.2.1.1.1
          key: siklu.rfInOctets
          delay: 30s
          history: 90d
          units: bps
          preprocessing:
            - type: CHANGE_PER_SECOND
              parameters:
                - ''
            - type: MULTIPLIER
              parameters:
                - '8'
          tags:
            - tag: component
              value: radio
        - uuid: 4d9222a0d51842f49d8a28e1a3ca30bc
          name: 'Siklu Radio RF Modulation'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.31926.2.1.1.46.1
          key: siklu.rfModulationName
          delay: 30s
          history: 90d
          valuemap:
            name: rfModulationType
          tags:
            - tag: component
              value: radio
          triggers:
            - uuid: 9c8b7e57a39d474f8290b6162b72286a
              expression: 'last(/Pylon Siklu EtherHaul/siklu.rfModulationName,#1)<>last(/Pylon Siklu EtherHaul/siklu.rfModulationName,#2)'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/Pylon Siklu EtherHaul/siklu.rfModulationName,#4)<>last(/Pylon Siklu EtherHaul/siklu.rfModulationName,#5)'
              name: 'RF Modulation Changed'
              opdata: 'Now: {ITEM.LASTVALUE1}, Was: {ITEM.LASTVALUE2}'
              priority: WARNING
              description: 'The Modulation of the RF radio has changed from its previous value'
              manual_close: 'YES'
              dependencies:
                - name: 'No SNMP data collection'
                  expression: 'max(/Pylon Siklu EtherHaul/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
              tags:
                - tag: scope
                  value: radio
            - uuid: b1ca6462f66849c992a103be6b91e6f8
              expression: 'last(/Pylon Siklu EtherHaul/siklu.rfModulationName)={$SIKLU.MOD_LOW}'
              name: 'RF Modulation too low'
              opdata: 'Modulation: {ITEM.LASTVALUE1}'
              priority: AVERAGE
              description: 'The Modulation level of the RF interface matches the defined list of "low" throughput levels. This may mean the radio is statically assigned to its lowest modulation level and needs to be increased'
              dependencies:
                - name: 'No SNMP data collection'
                  expression: 'max(/Pylon Siklu EtherHaul/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
              tags:
                - tag: scope
                  value: configuration
                - tag: scope
                  value: radio
        - uuid: e4fb2a62fc414f4c884f11e3032b7aed
          name: 'Siklu RF Out Octets'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.31926.2.2.1.5.1
          key: siklu.rfOutOctets
          delay: 30s
          history: 90d
          units: bps
          preprocessing:
            - type: CHANGE_PER_SECOND
              parameters:
                - ''
            - type: MULTIPLIER
              parameters:
                - '8'
          tags:
            - tag: component
              value: radio
        - uuid: 1d9aac646a254ae8bc8369266d0c9bdf
          name: 'Siklu Total Throughput'
          type: CALCULATED
          key: siklu.rfthroughput
          delay: 30s
          history: 90d
          units: bps
          params: last(//siklu.rfInOctets)+last(//siklu.rfOutOctets)
        - uuid: 266ee6f1a2fb43c2a8b0f18cb1015417
          name: 'Siklu Radio TX Power'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.31926.2.1.1.42.1
          key: siklu.rfTxPower
          history: 90d
          tags:
            - tag: component
              value: radio
        - uuid: b5df242a781545ea8a61cdce9b894a55
          name: 'Siklu Radio Temperature'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.31926.1.2.0
          key: siklu.temparature
          history: 90d
          units: celcius
          tags:
            - tag: component
              value: environment
          triggers:
            - uuid: b5ab5043304b43dcb04e571d46f46157
              expression: 'last(/Pylon Siklu EtherHaul/siklu.temparature)>{$SIKLU.TEMP_HIGH}'
              name: 'Radio Temperature High'
              opdata: 'Temp: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'The temperature of the radio is below the defined minimum temperature'
              dependencies:
                - name: 'No SNMP data collection'
                  expression: 'max(/Pylon Siklu EtherHaul/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: radio
            - uuid: 175a57a8a52d413496f698bd76d1c7bb
              expression: 'last(/Pylon Siklu EtherHaul/siklu.temparature)<{$SIKLU.TEMP_LOW}'
              name: 'Radio Temperature Low'
              opdata: 'Temp: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'The temperature of the radio is below the defined minimum temperature'
              dependencies:
                - name: 'No SNMP data collection'
                  expression: 'max(/Pylon Siklu EtherHaul/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: radio
        - uuid: 1ec2df7498794162bbb3a85599dce990
          name: 'Siklu Code Active Bank'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.31926.1.7.0
          key: siklu.versionactive
          delay: 5m
          history: 1w
          trends: '0'
          tags:
            - tag: component
              value: system
        - uuid: 1b9a9dc2019a44349bc6edca0d47c4e0
          name: 'Siklu Code Version Bank 1'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.31926.1.5.0
          key: 'siklu.version[1]'
          delay: 5m
          history: 1w
          value_type: TEXT
          trends: '0'
          tags:
            - tag: codebank
              value: '1'
            - tag: component
              value: system
        - uuid: 0e11eb4a1a264d96844aacaa26d01ca3
          name: 'Siklu Code Version Bank 2'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.4.1.31926.1.6.0
          key: 'siklu.version[2]'
          delay: 5m
          history: 1w
          value_type: TEXT
          trends: '0'
          tags:
            - tag: codebank
              value: '2'
            - tag: component
              value: system
        - uuid: 34de14c7628c44e9a8e63ff023ad1c05
          name: 'System contact details'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.4.0
          key: 'system.contact[sysContact.0]'
          delay: 15m
          history: 2w
          value_type: CHAR
          trends: '0'
          description: |
            MIB: SNMPv2-MIB
            The textual identification of the contact person for this managed node, together with information on how to contact this person.  If no contact information is known, the value is the zero-length string.
          inventory_link: CONTACT
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: 0a859b82a5ec4634af293a6cff930347
          name: 'System description'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.1.0
          key: 'system.descr[sysDescr.0]'
          delay: 15m
          history: 2w
          value_type: CHAR
          trends: '0'
          description: |
            MIB: SNMPv2-MIB
            A textual description of the entity. This value should
            include the full name and version identification of the system's hardware type, software operating-system, and
            networking software.
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: 277689e43f3e4d549804dcf21b6cb620
          name: 'Uptime (hardware)'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.25.1.1.0
          key: 'system.hw.uptime[hrSystemUptime.0]'
          delay: 2m
          history: 2w
          trends: 0d
          units: uptime
          description: |
            MIB: HOST-RESOURCES-MIB
            The amount of time since this host was last initialized. Note that this is different from sysUpTime in the SNMPv2-MIB [RFC1907] because sysUpTime is the uptime of the network management portion of the system.
          preprocessing:
            - type: CHECK_NOT_SUPPORTED
              parameters:
                - '-1'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
            - type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            - tag: component
              value: system
        - uuid: 8faec3aa27074d95825c166e82087ed6
          name: 'System location'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.6.0
          key: 'system.location[sysLocation.0]'
          delay: 15m
          history: 2w
          value_type: CHAR
          trends: '0'
          description: |
            MIB: SNMPv2-MIB
            The physical location of this node (e.g., `telephone closet, 3rd floor').  If the location is unknown, the value is the zero-length string.
          inventory_link: LOCATION
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: 11ee72c1e5474e478eab48605f95d70c
          name: 'System name'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.5.0
          key: system.name
          delay: 15m
          history: 2w
          value_type: CHAR
          trends: '0'
          description: |
            MIB: SNMPv2-MIB
            An administratively-assigned name for this managed node.By convention, this is the node's fully-qualified domain name.  If the name is unknown, the value is the zero-length string.
          inventory_link: NAME
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 12h
          tags:
            - tag: component
              value: system
        - uuid: 0bae7a5022a94c8e8fd21d847a962f1e
          name: 'Uptime (network)'
          type: SNMP_AGENT
          snmp_oid: 1.3.6.1.2.1.1.3.0
          key: 'system.net.uptime[sysUpTime.0]'
          delay: 2m
          history: 2w
          trends: 0d
          units: uptime
          description: |
            MIB: SNMPv2-MIB
            The time (in hundredths of a second) since the network management portion of the system was last re-initialized.
          preprocessing:
            - type: MULTIPLIER
              parameters:
                - '0.01'
          tags:
            - tag: component
              value: system
        - uuid: 015353ce2f0844288e1d1012c3ca8c48
          name: 'SNMP agent availability'
          type: INTERNAL
          key: 'zabbix[host,snmp,available]'
          history: 7d
          description: |
            Availability of SNMP checks on the host. The value of this item corresponds to availability icons in the host list.
            Possible value:
            0 - not available
            1 - available
            2 - unknown
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: a60ce3d1427943288b2b656d881a15cb
              expression: 'max(/Pylon Siklu EtherHaul/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0'
              name: 'No SNMP data collection'
              opdata: 'Current state: {ITEM.LASTVALUE1}'
              priority: AVERAGE
              description: 'SNMP is not available for polling. Please check device connectivity and SNMP settings.'
              dependencies:
                - name: 'Unavailable by ICMP ping'
                  expression: 'max(/Pylon Siklu EtherHaul/icmpping,#3)=0'
              tags:
                - tag: scope
                  value: availability
      tags:
        - tag: IsUPS
          value: 'False'
      macros:
        - macro: '{$NET.IF.IFNAME.NOT_MATCHES}'
          value: '(^Software Loopback Interface|^NULL[0-9.]*$|^[Ll]o[0-9.]*$|^[Ss]ystem$|^Nu[0-9.]*$|^veth[0-9a-z]+$|docker[0-9]+|br-[a-z0-9]{12}|vlan 1003)'
          description: 'Filter out loopbacks, nulls, docker veth links and docker0 bridge by default'
        - macro: '{$SIKLU.CINR_LOW}'
          value: '15'
          description: 'Low CINR Warning'
        - macro: '{$SIKLU.MOD_LOW}'
          value: (7|8)
          description: 'Warn if regex match this modulation level. See Value Mapping for values'
        - macro: '{$SIKLU.RSSI_DIFF_WARN}'
          value: '10'
          description: 'Warning will trigger if the RSSI decreases by this amount over a 1 minute average'
        - macro: '{$SIKLU.RSSI_HIGH}'
          value: '-20'
          description: 'High RSSI Warning'
        - macro: '{$SIKLU.RSSI_LOW}'
          value: '-60'
          description: 'Low RSSI Warning'
        - macro: '{$SIKLU.TEMP_HIGH}'
          value: '75'
          description: 'Degrees in C to trigger a high temp warning'
        - macro: '{$SIKLU.TEMP_LOW}'
          value: '-30'
          description: 'Degrees in C to trigger a low temp warning'
        - macro: '{$SNMP.TIMEOUT}'
          value: 5m
      valuemaps:
        - uuid: 588e62d9a7b14deda312a13de2a8b52c
          name: rfModulationType
          mappings:
            - value: '1'
              newvalue: QPSK1
            - value: '2'
              newvalue: QPSK2
            - value: '3'
              newvalue: QPSK3
            - value: '4'
              newvalue: QAM16
            - value: '5'
              newvalue: QAM64
            - value: '6'
              newvalue: QAM32
            - value: '7'
              newvalue: BPSK1
            - value: '8'
              newvalue: BPSK2
            - value: '9'
              newvalue: QAM128
            - value: '10'
              newvalue: M8PSK
